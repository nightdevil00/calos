# calOS Default Hyprland configuration

# Don't show update on first launch
ecosystem {
  no_update_news = true
  no_donation_nag = true
}


general {
  allow_tearing = true
}

# Default Hyprland configuration

windowrule {
    name = fix-xwayland-drags
    match:class = ^$
    match:title = ^$
    match:xwayland = true
    match:float = true
    match:fullscreen = false
    match:pin = false

    no_focus = true
}

windowrule {
    name = suppress-maximize-events
    match:class = .*

    suppress_event = maximize
    opacity = 0.97 0.88
}


xwayland {
  force_zero_scaling = true
}

# https://wiki.hyprland.org/Configuring/Variables/#misc
misc {
    disable_hyprland_logo = true
    disable_splash_rendering  = true
    focus_on_activate = true
    animate_manual_resizes = true
}

# Source Files found in .config/hypr

source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/input.conf
source = ~/.config/hypr/keybindings.conf
source = ~/.config/hypr/autostart.conf
source = ~/.config/hypr/interface.conf
source = ~/.config/hypr/games.conf
source = ~/.config/calos/current/theme/hyprland.conf

# Anonymous Rules
workspace = w[tv1], gapsout:10 250 10 250
workspace = 1, persistent:true

# Tagging Rules
windowrule = tag +terminal, match:class (Alacritty|kitty|ghostty)
windowrule = tag +chromium-based-browser, match:class ((google-)?[cC]hrom(e|ium)|[bB]rave-browser|Microsoft-edge|Vivaldi-stable|helium)
windowrule = tag +firefox-based-browser, match:class ([fF]irefox|zen|librewolf)
windowrule = tag +pip, match:title (Picture.?in.?[Pp]icture)
windowrule = tag +pip, match:initial_title Discord Popout
windowrule = tag +floating-window, match:class ^(Impala|bluetui|Wiremix|com.gabm.satty|Calos|TUI.float|sublime_text|DesktopEditors)$


# Electron Fuckery

windowrule {
    name = electron_app_default
    match:class = ^(steam|vesktop)$

    no_initial_focus = on
    workspace = 3 silent
    suppress_event = activatefocus
  }

windowrule {
    name = steam_friends
    match:title = ^(Friends List)$

    float = on  
    opacity = 1.0 1.0
  }

windowrule {
    name = steam_settings
    match:title = ^(Steam Settings)$

    opacity = 1.0 1.0 
    float = on
  }

# Clipse Rules

windowrule {
    name = clipse_default
    match:class = clipse

    center = on
    float = on  
    animation = slide bottom 10%
    size = 800 600
  }


# Miscellaneous Application Settings

windowrule {
    name = xdg_settings_portal
    match:class = ^(xdg-desktop-portal-gtk)$

    float = on
    size = 600 400
  }

windowrule {
    name = library_default
    match:class = ^(Library)$

    float = on
    size = 800 400
  }

# Browsers rules

windowrule {
    name = chromium_rules
    match:tag = chromium-based-browser

    tile = on 
    opacity = 0.98 0.95
  }

windowrule {
    name = firefox_rules
    match:tag = firefox-based-browser

    opacity = 0.98 0.95
  }

# Picture-in-picture overlays

windowrule {
    name = pip_defaults
    match:tag = pip

    float = on  
    pin = on  
    size = 600 350
    keep_aspect_ratio = on  
    border_size = 0 
    opacity = 1 1 
    move = 100 (monitor_h*0.08)
    }

# Floating windows

windowrule {
    name = float_default  
    match:tag = floating-window

    float = on  
    center = on 
    size = 800 600
  }

# Waybar Integration

windowrule {
    name = update_window
    match:class = System-Update

    float = on  
    center = on 
    size = 950 750
  }

windowrule {
    name = about_window
    match:class = About

    animation = slide top
    float = on
    size = 775 500
    move = (monitor_w-800) (monitor_h*.03)
  }

# Fullscreen screensaver

windowrule {
    name = screensaver_default
    match:class = Screensaver

    fullscreen = on
  }

# No transparency on media windows

windowrule {
    name = default_media
    match:class = ^(zoom|ffplay|vlc|mpv|mp4|com.obsproject.Studio|.*Pinta|pqiv)$

    opacity = 1.0 1.0
    size = 1000 800
    center = on
    float = on
    border_size = 0
  }

# Application-specific animation

layerrule {
    name = walker_default
    match:namespace = walker
    
    blur = on 
    animation = popin 50%
    ignore_alpha = 0.41
  }

# Global Push to Talk
# bind = CTRL, Z, pass, class:^(vesktop)$
